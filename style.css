:root{
  --bg:#11111b;      /* ciemne tło */
  --bg-2:#171725;
  --card:#1c1d2c;
  --ink:#eef0f7;     /* kolor tekstu */
  --muted:#a0a6bb;   /* tekst poboczny */
  --ring:#2e3050;    /* obramowania */
  --accent:#7c5cff;
  --accent-2:#a897ff;
  --good:#2bd987;
  --danger:#ff6b6b;
  --surface:#0e0f18; /* powierzchnia pól/galerii */
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--ink);
  background:var(--bg);
  -webkit-tap-highlight-color: transparent;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

.topbar{
  position:sticky; top:0; z-index:10;
  display:flex; justify-content:space-between; align-items:center;
  padding:.7rem 1rem;
  background:linear-gradient(180deg,rgba(23,23,37,.9),rgba(23,23,37,0));
  border-bottom:1px solid var(--ring);
  backdrop-filter:blur(6px);
}

.brand{display:flex; align-items:center; gap:.6rem}
.logo{font-size:1.35rem}
.topbar h1{font-size:1.05rem; margin:0}
.actions{display:flex; gap:.45rem}
.actions button{
  border:1px solid var(--ring);
  background:var(--card); color:var(--ink);
  padding:.55rem .65rem; border-radius:12px; cursor:pointer
}
.actions button:active{transform:translateY(1px)}

.wrap{max-width:1100px; margin:0 auto; padding:1rem}
.section{margin:1.1rem 0}
.card{
  background:var(--card);
  border:1px solid var(--ring);
  border-radius:16px; padding:1rem;
  box-shadow:0 10px 30px rgba(0,0,0,.25)
}

h2{margin:.2rem 0 1rem; font-size:1.05rem}
.muted{color:var(--muted); font-size:.95rem}

input[type="file"]{
  background:var(--surface);
  border:1px dashed var(--ring);
  border-radius:12px; padding:.75rem; width:100%; color:var(--ink)
}

/* przyciski */
.btn{
  border:1px solid transparent;
  background:var(--accent);
  color:#fff; padding:.6rem 1rem;
  border-radius:12px; cursor:pointer; font-weight:700; letter-spacing:.2px
}
.btn:hover{filter:saturate(1.05) brightness(1.03)}
.btn:active{transform:translateY(1px)}
.btn.primary{box-shadow:0 6px 16px rgba(124,92,255,.35)}
.btn.subtle{background:#2a2a3d; color:#fff; border-color:var(--ring)}
.btn.subtle:hover{background:#343451}
.filelike{position:relative; overflow:hidden}
.filelike input{position:absolute; inset:0; opacity:0; cursor:pointer}

.spread-buttons{display:flex; gap:.5rem; flex-wrap:wrap}

/* details / akordeon lepiej widoczny */
details summary{
  cursor:pointer; list-style:none; padding:.55rem .6rem; border-radius:10px;
  border:1px solid var(--ring); background:var(--surface); color:var(--ink)
}
details[open] summary{background:#22243a}

/* layout rozkładów */
.spread-placeholder{min-height:220px; display:flex; align-items:center; justify-content:center}
.ghost{color:var(--muted)}
#spread{margin-top:1rem}
#spread.threeCards{display:flex; justify-content:center; gap:1rem; flex-wrap:wrap}
#spread.cross{
  display:grid; gap:1rem; justify-items:center;
  grid-template-areas: ". challenge ." "situation . advice" ". outcome .";
  grid-template-columns:1fr 1fr 1fr;
}

/* custom */
#spread.custom-line-h{display:flex; gap:1rem; justify-content:center; flex-wrap:wrap}
#spread.custom-line-v{display:flex; gap:1rem; flex-direction:column; align-items:center}
#spread.custom-grid{display:grid; gap:1rem; justify-content:center}

/* slot */
.slot{display:flex; flex-direction:column; align-items:center; gap:.4rem}
.slot .label{font-size:.9rem; color:#ffd86b; text-shadow:0 1px 0 rgba(0,0,0,.3)}
.slot .card{
  width:148px; height:236px;
  border-radius:14px; border:2px dashed #686a92;
  background:var(--surface);
  display:flex; align-items:center; justify-content:center;
  position:relative; overflow:hidden; cursor:pointer; transition:box-shadow .2s, border-color .2s
}
.slot .card:hover{box-shadow:0 0 0 3px var(--accent) inset}
.slot.active .card{box-shadow:0 0 0 3px var(--good) inset; border-color:var(--good)}
.slot .card img{width:100%; height:100%; object-fit:cover}
.slot .card.reversed{transform:rotate(180deg)}

/* galeria */
.gallery{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(84px,1fr));
  gap:.55rem; max-height:360px; overflow:auto;
  border:1px solid var(--ring); border-radius:12px; padding:.6rem; background:var(--surface)
}
.gallery.empty{display:flex; align-items:center; justify-content:center; color:var(--muted); min-height:120px}
.gallery .thumb{
  width:100%; aspect-ratio:2.5/4; object-fit:cover; border-radius:10px;
  outline:1px solid #32345a; cursor:pointer; transition:transform .08s, outline-color .15s
}
.gallery .thumb:hover{outline-color:var(--accent-2)}
.gallery .thumb:active{transform:scale(.98)}

/* notatka */
.note-grid{display:grid; gap:.7rem; grid-template-columns:repeat(2,minmax(0,1fr))}
.note-grid label{display:flex; flex-direction:column; gap:.35rem}
.note-grid label.full{grid-column:1/-1}
.note-grid input,.note-grid textarea{
  width:100%; padding:.75rem .85rem; border-radius:12px;
  border:1px solid var(--ring); background:var(--surface); color:var(--ink)
}
.note-grid textarea{min-height:112px; resize:vertical}
.range{display:flex; align-items:center; gap:.6rem}
.range input[type=range]{width:210px}
.range output{min-width:48px; text-align:right; color:var(--muted)}

/* historia */
.history{display:flex; flex-direction:column; gap:.9rem}
.reading{border:1px solid var(--ring); border-radius:14px; padding:.85rem; background:#181a2b}
.reading .meta{color:var(--muted); font-size:.92rem; margin-bottom:.45rem}
.reading .mini{display:flex; gap:.5rem; flex-wrap:wrap; margin:.4rem 0}
.reading .mini img{width:68px; height:108px; object-fit:cover; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.25)}
.note-details{margin:.55rem 0}
.blk{margin:.38rem 0}
.blk-h{font-weight:700; margin-bottom:.12rem}
.chips{margin:.35rem 0}
.chip{display:inline-block; padding:.22rem .5rem; background:#2b2b44; color:#fff; border-radius:999px; font-size:.85rem}
.history-controls{display:flex; align-items:center; gap:.55rem; margin:.6rem 0 1rem}

/* przyjazny jasny motyw */
.light{
  --bg:#f7f7fb;
  --bg-2:#ffffff;
  --card:#ffffff;
  --ink:#141625;
  --muted:#5e6478;
  --ring:#e6e6f2;
  --accent:#6a4dff;
  --accent-2:#907cff;
  --surface:#ffffff;
}
.light .card{box-shadow:0 10px 28px rgba(30,35,70,.06)}
.light .gallery{background:#fff}
.light details[open] summary{background:#f2f2f9}
.light .reading{background:#f9f9ff}
.light .chip{background:#ececff; color:#333}


/* toast */
.toast{
  position:fixed; left:50%; bottom:22px; transform:translateX(-50%);
  background:rgba(28,28,40,.98); color:#fff; padding:.6rem 1rem;
  border:1px solid var(--ring); border-radius:10px; opacity:0; pointer-events:none;
  transition:opacity .25s, transform .25s
}
.toast.show{opacity:1; transform:translateX(-50%) translateY(-6px)}

.footer{color:var(--muted); text-align:center; padding:2rem 1rem}

/* =================== RESPONSYWNOŚĆ =================== */

/* Telefony: ≤ 480px */
@media (max-width: 480px){
  .wrap{padding:.7rem}
  .topbar{padding:.6rem .7rem}
  .topbar h1{font-size:.98rem}
  .section{margin:.8rem 0}
  .card{padding:.8rem}

  .spread-buttons .btn{padding:.5rem .7rem; font-size:.9rem; border-radius:10px}

  /* większe sloty i wygodne trafianie palcem */
  .slot .card{width:46vw; max-width:220px; height:calc(46vw * 1.6); min-height:220px}

  /* galeria – mniejsze kafelki, gęstsza siatka */
  .gallery{grid-template-columns: repeat(auto-fill, minmax(76px,1fr)); max-height:50vh}
  .gallery .thumb{border-radius:9px}

  /* notatka – jedna kolumna */
  .note-grid{grid-template-columns:1fr}
  .range input[type=range]{width:100%}

  /* historia – miniatury ciut większe dla oka */
  .reading .mini img{width:72px; height:114px}
}

/* Małe tablety: ≤ 768px */
@media (max-width: 768px){
  #spread.cross{
    grid-template-areas:
      "challenge"
      "situation"
      "advice"
      "outcome";
    grid-template-columns:1fr;
    justify-items:center;
  }
  .slot .card{width:160px; height:256px}
}
